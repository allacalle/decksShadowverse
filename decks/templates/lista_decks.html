{% extends 'base.html' %}

{% block content %}
<div class="class-buttons">
  <a href="?class=Todas" class="btn-class-lista-decks ">Todas</a>
  {% for clase in clases %}
    <a href="?class={{ clase.name_class }}" class="btn-class-lista-decks {% if selected_class == clase.name_class %}selected{% endif %}">
      <img src="{{ clase.icon.url }}" alt="{{ clase.name_class }}" />
    </a>
  {% endfor %}
</div>

{% for deck in decks %}
<div class="deck-wrapper" data-clase="{{ deck.clase_deck }}" style="transition: opacity 0.5s ease-in-out; opacity: 1;">
  <a href="{% url 'detalle_deck' deck.id %}" class="deck-item">
    <h3 class="deck-name">{{ deck.nombre }}</h3>
    <p class="deck-description">{{ deck.descripcion }}</p>
    <div class="deck-content">
      <img src="{{ deck.imagen.url }}" alt="{{ deck.nombre }}">
      <p class="publication-date">Fecha de Publicación: {{ deck.fecha_publicacion }}</p>
      <p>{{ deck.clase_deck }}</p>
    </div>
    <div class="download-button">
      <a href="{{ deck.imagen.url }}" download="{{ deck.nombre }}.jpg" class="download-btn">
        <span class="emoji">&#128190;</span> Descargar Imagen
      </a>
    </div>
  </a>
</div>
{% endfor %}

<div class="pagination">
  <span class="step-links">
    {% if decks.has_previous %}
      <a href="?page=1{% if selected_class %}&class={{ selected_class }}{% endif %}">&laquo; primera</a>
      <a href="?page={{ decks.previous_page_number }}{% if selected_class %}&class={{ selected_class }}{% endif %}">anterior</a>
    {% endif %}

    <span class="current">
      Página {{ decks.number }} de {{ decks.paginator.num_pages }}.
    </span>

    {% if decks.has_next %}
      <a href="?page={{ decks.next_page_number }}{% if selected_class %}&class={{ selected_class }}{% endif %}">siguiente</a>
      <a href="?page={{ decks.paginator.num_pages }}{% if selected_class %}&class={{ selected_class }}{% endif %}">última &raquo;</a>
    {% endif %}
  </span>
</div>



<script>
  document.addEventListener('DOMContentLoaded', function() {
    const classButtons = document.querySelectorAll('.btn-class-lista-decks');
    const decks = document.querySelectorAll('.deck-wrapper');

    classButtons.forEach(function(button) {
      button.addEventListener('click', function(event) {
        const selectedClass = this.getAttribute('data-class');

        // Desmarca todos los botones primero
        classButtons.forEach(function(btn) {
          btn.classList.remove('selected');
        });

        this.classList.add('selected');

        // Aplica la lógica de mostrar/ocultar decks
          decks.forEach(function(deck) {
            const claseMazo = deck.getAttribute('data-clase');
            if (claseMazo === selectedClass) {
              deck.style.display = "block";
            } else {
              deck.style.display = "none";
            }
          });
        }
      });
    });
  });
</script>


<style>
/* Button styles */
.btn-class-lista-decks {
  width: 120px;
  height: 60px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #000; /* Fondo negro */
  color: #fff; /* Color del texto (blanco) */
  border: none; /* Sin bordes */
  border-radius: 10px; /* Bordes redondeados */
  margin-right: 10px;
  cursor: pointer;
  text-decoration: none; /* Elimina el subrayado del enlace */
  transition: background-color 0.2s ease-in-out; /* Añade una transición suave al cambiar el color de fondo */
  outline: none; /* Elimina el contorno del botón */
}

.btn-class-lista-decks:hover {
  background-color: #333; /* Cambia el color de fondo al pasar el ratón */
}

.btn-class-lista-decks.selected {
  border: 2px solid #ffd700; /* Borde dorado para el botón seleccionado */
}

/* Pagination styles */
.pagination {
  display: flex;
  justify-content: center;
  list-style: none;
  padding: 0;
  margin: 0; /* Añade margen cero para evitar espacios innecesarios */
}

.pagination li {
  margin: 0 5px;
}

.pagination a {
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 5px;
  color: #333; /* Cambia el color del texto a negro */
  transition: background-color 0.2s ease-in-out; /* Añade una transición suave al cambiar el color de fondo */
}

.pagination a:hover {
  background-color: #eee; /* Cambia el color de fondo al pasar el ratón */
  color: #000; /* Cambia el color del texto a negro al pasar el ratón */
}

.pagination .current {
  background-color: #007bff;
  color: #fff;
  border: 1px solid #007bff;
}

/* Deck wrapper styles */
.deck-wrapper {
  transition: opacity 0.5s ease-in-out;
  opacity: 1;
}

.deck-wrapper.hidden {
  opacity: 0;
  pointer-events: none;
  height: 0;
  margin: 0;
  padding: 0;
  overflow: hidden;
}


</style>

{% endblock %}